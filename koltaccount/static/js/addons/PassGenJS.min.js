/**
 * @author Aleksey Martov (c) 2014 <a-martov@linber.ru>
 * The MIT License (MIT)
 * @version 0.1
 */
var PassGenJS=function(){"use strict";var m="qwertyuiopasdfghjklzxcvbnm",v=m.toUpperCase(),h="0123456789",g="!@#$%^&*()_+-={}[]:;|?<>/\"'~",P=m.split(""),U=(v.split(""),h.split("")),d=g.split(""),k=null;function x(e,r){var t=r-e+1;return Math.floor(Math.random()*t)+e}function I(e){return 0<(e=e||[]).length?e[x(0,e.length-1)]:null}function r(e){var r="",t=0,s=0,l=void 0!==e.maxGenerateRecursion?e.maxGenerateRecursion:1,n={};if(e)if(e.score||e.reliabilityPercent){var i=k=k||function(){for(var e={},r=0;r<6666;r++){var t=r+"";r<10?t="000"+r:10<=r&&r<100?t="00"+r:100<=r&&r<1e3&&(t="0"+r);var s,l,n=t.split("");20<parseInt(n[0])+parseInt(n[1])+parseInt(n[2])+parseInt(n[3])||(s=n.join("-"),0!=(l=M(h.substr(0,n[0])+m.substr(0,n[1])+g.substr(0,n[2])+v.substr(0,n[3]))).score&&(e[s]={score:l.score,reliabilityPercent:l.reliabilityPercent}))}return e}(),a=[];if(void 0!==e.score){if(e.score=parseInt(e.score),0==e.score)return"";for(var o in(4<e.score||e.score<0)&&(e.score=4),i)i[o].score==e.score&&(a[a.length]=o)}else if(void 0!==e.reliabilityPercent){e.reliabilityPercent=parseInt(e.reliabilityPercent);var b=[];if(0==e.reliabilityPercent)return"";for(var o in(100<e.reliabilityPercent||e.reliabilityPercent<0)&&(e.reliabilityPercent=100),i)b[b.length]=i[o].reliabilityPercent,i[o].reliabilityPercent==e.reliabilityPercent&&(a[a.length]=o);if(!a.length){b.sort(function(e,r){return e<r?-1:r<e?1:0});for(var c=b.length,p=null,u=0;u<c;u++)if(b[u]>e.reliabilityPercent){p=b[u];break}if(!p){b.reverse();for(u=0;u<c;u++)if(b[u]<e.reliabilityPercent){p=b[u];break}}for(var o in i)i[o].reliabilityPercent==p&&(a[a.length]=o)}}var f=I(a);f&&(n={letters:(f=f.split("-"))[1],lettersUpper:f[3],numbers:f[0],symbols:f[2]})}else n={letters:e.letters,lettersUpper:e.lettersUpper,numbers:e.numbers,symbols:e.symbols};else n={letters:4,lettersUpper:2,numbers:2,symbols:1};for(u=0;u<=l;u++){var y=function(e){for(var r=(e=e||{}).symbols?e.symbols:0,t=e.numbers?e.numbers:0,s=e.letters?e.letters:0,l=e.lettersUpper?e.lettersUpper:0,n=r+t+s+l,i="",a={letters:0,lettersUpper:0,numbers:0,symbols:0},o={letters:!0,lettersUpper:!0,numbers:!0,symbols:!0},b=0;b<n;b++){o.letters&&a.letters==s&&(o.letters=!1),o.lettersUpper&&a.lettersUpper==l&&(o.lettersUpper=!1),o.numbers&&a.numbers==t&&(o.numbers=!1),o.symbols&&a.symbols==r&&(o.symbols=!1);var c=[];for(var p in o)o[p]&&(c[c.length]=p);var u="";switch(I(c)){case"letters":u=P[x(0,P.length-1)],a.letters++;break;case"lettersUpper":u=P[x(0,P.length-1)].toUpperCase(),a.lettersUpper++;break;case"numbers":u=U[x(0,U.length-1)],a.numbers++;break;case"symbols":u=d[x(0,d.length-1)],a.symbols++}i+=u}return i}(n),t=M(y).entropy;if(e.score){if(e.score==M(y).score){r=y;break}}else s<t&&(s=t,r=y)}return r=r||y}function M(e){var r={},t=0,s=0,l=e.split("");for(var n in l)!r.strLetters&&-1<m.indexOf(l[n])?r.strLetters=m.length:!r.strNumbers&&-1<h.indexOf(l[n])?r.strNumbers=h.length:!r.strSymbols&&-1<g.indexOf(l[n])?r.strSymbols=g.length:!r.strLettersUpper&&-1<v.indexOf(l[n])&&(r.strLettersUpper=v.length);var i=0;for(var n in r)i+=r[n];0<(t=i?Math.round(e.length*(Math.log(i)/Math.log(2))):0)&&t<56?s=1:56<=t&&t<64?s=2:64<=t&&t<128?s=3:128<=t&&(s=4);var a=t/1.28;return{password:e,score:s,entropy:t,reliability:a=a<100?a:100,reliabilityPercent:Math.round(a)}}return{getPassword:function(e){return r(e)},getScore:M}}();